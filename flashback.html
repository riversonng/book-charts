<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>ğŸŒŸ Flashback - Biblioteca</title>

<style>
* {
  box-sizing: border-box;
}
body {
  margin: 0;
  padding: 24px;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial;
}

/* ========================================= */
/* HEADER */
/* ========================================= */
header {
  max-width: 1100px;
  margin: 0 auto 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

header h1 {
  margin: 0;
  font-size: 22px;
  font-weight: 600;
  color: var(--text);
}

.header-buttons {
  display: flex;
  gap: 8px;
}

.header-buttons button {
  background: var(--accent);
  border: 1px solid var(--chip-border);
  border-radius: 8px;
  color: var(--text);
  padding: 6px 10px;
  font-size: 14px;
  cursor: pointer;
}

/* ========================================= */
/* YEAR BLOCK */
/* ========================================= */
.year-block {
  max-width: 1100px;
  margin: 20px auto;
  background: var(--card);
  border: 1px solid var(--chip-border);
  border-radius: 10px;
  padding: 16px;
}

.year-block h2 {
  margin: 0 0 12px;
  font-size: 18px;
  font-weight: 600;
  color: var(--accent);
}
.year-analysis {
  margin: 8px 0 12px;
  font-size: 0.95em;
  color: var(--muted);
  font-style: italic;
}

/* ========================================= */
/* STATS */
/* ========================================= */

.stats {
  display: flex;
  flex-wrap: wrap;
  justify-content: center; /* centraliza horizontalmente */
  gap: 5px;
  text-align: center;
}

.stat {
  flex: 1 1 180px;
  
  /* aparÃªncia glass */
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  
  border-bottom: 4px solid var(--bg);
 border-right: 4px solid var(--accent);
  border-radius: 12px;
  padding: 16px;
  
  color: var(--text);
  transition: all 0.25s ease;
}

.stat span {
  display: block;
  font-weight: bold;
  margin-bottom: 6px;
}

.year-header {
  text-align: center;
}

.divider {
  flex-basis: 100%;
  border: none;
  height: 1px;
  background: var(--accent);
  margin: 8px 0;
}
  .greatest-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 6px 12px;
    line-height: 0.8;
    text-align: left;
  }

  .greatest-grid > div {
    display: block;
  }

.barra-container {
  width: 100%;
  height: 18px;
  background: var(--bg);
  border-radius: 6px;
  overflow: hidden;
  margin-top: 6px;
  display: flex;
  font-size: 0.75em;
}

.barra {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;   /* centraliza o texto */
  color: white;
  font-weight: 600;
  white-space: nowrap;       /* nÃ£o quebra linha */
  overflow: hidden;
  text-overflow: clip;       /* esconde texto se faltar espaÃ§o */
  padding: 0 4px;
  transition: width 0.4s ease;
}

.kind {
  background: var(--accent);
}

.fisico {
  background: var(--muted);
}

.pt {
  background: var(--accent);
}

.in {
  background: var(--muted);
}

/* ========================================= */
/* TEMAS â€“ EXATAMENTE OS DO TEMA PRINCIPAL */
/* ========================================= */

.theme-dark {
  --bg: #0a0c10;
  --card: #11141a;
  --text: #e8ecf2;
  --muted: #7b8592;
  --accent: #4da3ff;
  --chip-border: #2b3542;
}

.theme-dark-academia {
  --bg: #1f1b17;
  --card: #493b30;
  --text: #f7f2e7;
  --muted: #ddd5ca;
  --accent: #ebac6d;
  --chip: #3a3028;
  --chip-border: #6b5848;
}

.theme-skoob {
  --bg: #e9f4ff;
  --card: #ffffff;
  --text: #1a1e25;
  --muted: #62758a;
  --accent: #1f8bff;
  --chip-border: #95c4ff;
}

.theme-tumblr {
  --bg: #36465d;
  --card: #465a77;
  --text: #ffffff;
  --muted: #cfd6e0;
  --accent: #9b59b6;
  --chip: #529ECC;
  --chip-border: #5a6b85;
}


.theme-gray {
  --bg: #2c2d2f;
  --card: #393b3e;
  --text: #e4e4e4;
  --muted: #a8a8a8;
  --accent: #ffdf57;
  --chip-border: #76787c;
}

/* ========================================= */
/* BOTÃ•ES DE TEMAS (corrigidos!) */
/* ========================================= */

.themes {
  display: flex;
  gap: 8px;
  margin: 12px 0;
}


/* CORES FIXAS DAS BOLINHAS */
.theme-option {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.3s ease;
  background: rgba(255, 255, 255, 0.1); /* leve transparÃªncia */
}

.theme-option.theme-dark {
  border-color: #171b27;
  background: rgba(23, 27, 39, 0.3);
}

.theme-option.theme-dark-academia {
  border-color: #c08a5c;
  background: rgba(192, 138, 92, 0.3);
}

.theme-option.theme-skoob {
  border-color: #0074d9;
  background: rgba(0, 116, 217, 0.3);
}

.theme-option.theme-tumblr {
  border-color: #44536d;
  background: rgba(68, 83, 109, 0.3);
}

.theme-option.theme-gray {
  border-color: #3a3a41;
  background: rgba(58, 58, 65, 0.3);
}

/* Efeito hover */
.theme-option:hover {
  transform: scale(1.2);
  box-shadow: 0 0 6px rgba(0,0,0,0.3);
}


</style>

</head>
<body>
  <header>
    <h1>ğŸŒŸ Flashback</h1>
    <div class="themes">
      <div class="theme-option theme-dark" onclick="setTheme('theme-dark')"></div>
      <div class="theme-option theme-dark-academia" onclick="setTheme('theme-dark-academia')"></div>
      <div class="theme-option theme-skoob" onclick="setTheme('theme-skoob')"></div>
      <div class="theme-option theme-tumblr" onclick="setTheme('theme-tumblr')"></div>
      <div class="theme-option theme-gray" onclick="setTheme('theme-gray')"></div>
    </div>

    <div class="header-buttons">
      <button id="2026">ğŸ¦‹</button>
      <button id="back">ğŸ“š</button>
      <button id="charts">ğŸ“Š</button>
      <button id="tags">ğŸ·ï¸</button>
      <button id="flashback">ğŸŒŸ</button>
    </div>
  </header>

  <section id="flashback-container">
    <!-- Blocos por ano serÃ£o renderizados aqui -->
  </section>

  <script>
    // Carregar dados
    fetch("./books.json").then(r=>r.json()).then(data=>{
      renderFlashback(data);
    });

function getYearAnalysis(year){
const analyses = {

2025: `<div id="analysis" style="columns:2; column-gap:4px; text-align:left;">âœ¨ 2025 â€” Palavra-chave: Maturidade  
<p>ğŸ“š Sobre o ano: VocÃª alterna obras-primas e entretenimento com plena consciÃªncia do que cada leitura te oferece. Ã‰ o ano da seguranÃ§a e da precisÃ£o.  
<p>ğŸ’« Destaques emocionais: IlÃ­ada, MatÃ©ria Escura, Nada de Novo no Front, O Hobbit, Kim Jiyoung, 1982, Yellowface, Alchemised, A Seca.  
<p>ğŸ” PadrÃµes fortes: Fechamento de trilogias e sagas (Tons de Magia, Papoula, Calluvia). ClÃ¡ssicos e cÃ¢none que solidificam fundamentos. Suspenses afiados com autores que vocÃª confia.  
<p>ğŸŒ¿ EssÃªncia do ano: EquilÃ­brio entre densidade e prazer, entre intelecto e emoÃ§Ã£o.  
<p>ğŸ’› Retrato emocional: VocÃª lÃª para entender o mundo e tambÃ©m para se sentir intensamente viva dentro dele.</div>`,

2024: `<div id="analysis" style="columns:2; column-gap:4px; text-align:left;">âœ¨ 2024 â€” Palavra-chave: FusÃ£o  
<p>ğŸ“š Sobre o ano: Um ano de dualidades deliciosas â€” monster romance, fantasia sombria, DostoiÃ©vski, Atwood, sagas Ã©picas e literatura visceral convivem lado a lado.  
<p>ğŸ’« Destaques emocionais: Babel, Nona Casa, Crime e Castigo, Amigas para Sempre, A Soul to Revive, Jantar Secreto.  
<p>ğŸ” PadrÃµes fortes: Maratonas de universos longos e intensos. ExploraÃ§Ã£o de limites emocionais e narrativos. Fidelidade aos universos mesmo com altos e baixos.  
<p>ğŸŒ¿ EssÃªncia do ano: Buscando profundidade e prazer em igual medida â€” sem se limitar.  
<p>ğŸ’› Retrato emocional: Complexidade plena: estÃ©tica, visceralidade e pensamento caminhando juntos.</div>`,

2023: `<div id="analysis" style="columns:2; column-gap:4px; text-align:left;">âœ¨ 2023 â€” Palavra-chave: VÃ³rtice  
<p>ğŸ“š Sobre o ano: Seu ano mais caleidoscÃ³pico. VocÃª gira entre terror elegante, dark academia, mangÃ¡s sensÃ­veis, fantasia romÃ¢ntica e narrativas densas.  
<p>ğŸ’« Destaques emocionais: A Paciente Silenciosa, Good Omens, Como se FÃ´ssemos VilÃµes, A HistÃ³ria Secreta, Elements Series, Deuses Americanos.  
<p>ğŸ” PadrÃµes fortes: EstÃ©ticas sombrias com alta carga emocional. Graphic novels tocantes e delicadas. Sagas romÃ¢nticas intensas e cheias de tensÃ£o.  
<p>ğŸŒ¿ EssÃªncia do ano: ExperimentaÃ§Ã£o sem medo â€” vocÃª atravessa sombras, beleza e dor com igual coragem.  
<p>ğŸ’› Retrato emocional: O ano da ousadia literÃ¡ria total.</div>`,

2022: `<div id="analysis" style="columns:2; column-gap:4px; text-align:left;">âœ¨ 2022 â€” Palavra-chave: Curadoria  
<p>ğŸ“š Sobre o ano: Menos quantidade, mais impacto. VocÃª escolhe com precisÃ£o cirÃºrgica e se aprofunda em romances contemporÃ¢neos inteligentes, fantasia adulta e nÃ£o ficÃ§Ã£o potente.  
<p>ğŸ’« Destaques emocionais: A HipÃ³tese do Amor, Vergonha, Romance com o Duque, Entre a Foice e o Martelo, O DossiÃª Pelicano, Sapiens.  
<p>ğŸ” PadrÃµes fortes: Romance com â€œbrain & heartâ€. Fantasia mitolÃ³gica e adulta com afeto. Psicologia e histÃ³ria que ampliam mundo.  
<p>ğŸŒ¿ EssÃªncia do ano: Narrativas com propÃ³sito, doÃ§ura e densidade intelectual.  
<p>ğŸ’› Retrato emocional: VocÃª entende exatamente o que te nutre â€” e escolhe com confianÃ§a.</div>`,

2021: `<div id="analysis" style="columns:2; column-gap:4px; text-align:left;">âœ¨ 2021 â€” Palavra-chave: ExpansÃ£o  
<p>ğŸ“š Sobre o ano: Um ano de capricho narrativo. VocÃª aprofunda gÃªneros, revisita clÃ¡ssicos e explora mistÃ©rios com elegÃ¢ncia.  
<p>ğŸ’« Destaques emocionais: 1984, A Casa de Hades, O Sangue do Olimpo, Teto Para Dois, Evelyn Hugo, V de VinganÃ§a, As Cavernas de AÃ§o.  
<p>ğŸ” PadrÃµes fortes: MistÃ©rios e crimes clÃ¡ssicos refinados. Graphic novels impactantes e inesquecÃ­veis. Romances de Ã©poca com preferÃªncias claras.  
<p>ğŸŒ¿ EssÃªncia do ano: Reconhecimento do prÃ³prio gosto com nitidez.  
<p>ğŸ’› Retrato emocional: VocÃª lÃª com consciÃªncia, estrutura e sensibilidade.</div>`,

2020: `<div id="analysis" style="columns:2; column-gap:4px; text-align:left;">âœ¨ 2020 â€” Palavra-chave: ImersÃ£o  
<p>ğŸ“š Sobre o ano: O inÃ­cio da maratona. Fantasia juvenil, clÃ¡ssicos intensos e nÃ£o ficÃ§Ã£o transformadora se misturam num ritmo vibrante.  
<p>ğŸ’« Destaques emocionais: Orgulho e Preconceito, O Morro dos Ventos Uivantes, Eu, RobÃ´, Durotan, Mulheres que Correm com os Lobos.  
<p>ğŸ” PadrÃµes fortes: Maratonas de sÃ©ries queridas (Harry Potter, Riordan). Fantasia, mitologia e aventura dominantes. Ensaios feministas e sociais que moldam visÃ£o de mundo.  
<p>ğŸŒ¿ EssÃªncia do ano: Fome por universos grandes e ideias grandes.  
<p>ğŸ’› Retrato emocional: VocÃª lÃª com intensidade, entrega e encantamento.</div>`

};

return analyses[year] || "";
}

    function renderFlashback(list){
      const grouped = {};
      list.forEach(b=>{
        const year = b.YEAR || "Sem ano";
        if(!grouped[year]) grouped[year] = [];
        grouped[year].push(b);
      });

      const container = document.getElementById("flashback-container");
      container.innerHTML = "";

      const anos = [2025, 2024, 2023, 2022, 2021, 2020];

      anos.forEach(year=>{
        if(!grouped[year]) return;
        const books = grouped[year];
        const block = document.createElement("div");
        block.className = "year-block";

        // EstatÃ­sticas principais
        const total = books.length;
        const pages = books.reduce((sum,b)=>sum+(b.PAGES||0),0);
        const avgRating = (books.reduce((sum,b)=>sum+(b.RATING||0),0)/total).toFixed(2);

        const favs = books.filter(b=>b.FAV=="YES").length;
        const nota5 = books.filter(b=>b.RATING==5).length;

        // Maior e menor livro em pÃ¡ginas
const maiorLivro = books.length ? Math.max(...books.map(b=>b.PAGES||0)) : "-";
const menorLivro = books.length ? Math.min(...books.map(b=>b.PAGES||0)) : "-";

        // Formato
        const kindle = books.filter(b=>b.FORMAT=="K");
        const fisico = books.filter(b=>b.FORMAT=="F");
        const qtdK = kindle.length;
        const qtdF = fisico.length;
        const mediaK = qtdK ? (kindle.reduce((s,b)=>s+(b.PAGES||0),0)/qtdK).toFixed(0) : "-";
        const mediaF = qtdF ? (fisico.reduce((s,b)=>s+(b.PAGES||0),0)/qtdF).toFixed(0) : "-";

        // Idioma
        const pt = books.filter(b=>b.LANGUAGE=="PT");
        const inLang = books.filter(b=>b.LANGUAGE=="IN");
        const qtdPT = pt.length;
        const qtdIN = inLang.length;
// Maior e menor livro em pÃ¡ginas + tÃ­tulo
let maiorLivroObj = null;
let menorLivroObj = null;

if (books.length) {
  maiorLivroObj = books.reduce((max,b)=> (b.PAGES||0) > (max.PAGES||0) ? b : max, books[0]);
  menorLivroObj = books.reduce((min,b)=> (b.PAGES||0) < (min.PAGES||0) ? b : min, books[0]);
}

// Contagem de gÃªneros
const generoCount = {};
books.forEach(b=>{
  [b.TAG1, b.TAG2, b.TAG3].forEach(tag=>{
    if(tag){
      generoCount[tag] = (generoCount[tag]||0)+1;
    }
  });
});
const topGeneros = Object.entries(generoCount)
  .sort((a,b)=>b[1]-a[1])
  .slice(0,5);

const greatest = books.filter(b => b.RATING === 5 && b.FAV === "YES");

let somaKF = qtdK + qtdF;
let somaPTIN = qtdPT + qtdIN;

block.innerHTML = `
  <div class="year-header">
    <h2>${year}</h2>
    <div class="year-analysis">
      ${getYearAnalysis(year)}
    </div>
  </div>

  <div class="stats">

    <div class="stat"><span>áŠáŠ||áŠ Total de livros</span><div class="val">${total}</div></div>
    <div class="stat">
      <b>ğŸ•® PÃ¡ginas do ano</b>
      <div class="val">
        ${pages}
        <br>
        <small style="font-size:0.8em; color:var(--muted);">
          Ritmo: ${(pages/365).toFixed(2)} pgs/dia
        </small>
      </div>
    </div>
    <div class="stat"><span>âœ¦ MÃ©dia de avaliaÃ§Ã£o</span><div class="val">${avgRating}</div></div>
    <div class="stat"><span>â¤ï¸ Favoritos</span>
  <div class="val">
    ${favs}
    <br>
    <small style="font-size:0.8em; color:var(--muted);">
      ${( (favs/total)*100 ).toFixed(1 )}% do total
    </small>
  </div>
</div>
<div class="stat"><span>âœ° Livros nota 5</span>
  <div class="val">
    ${nota5}
    <br>
    <small style="font-size:0.8em; color:var(--muted);">
      ${( (nota5/total)*100 ).toFixed(1 )}% do total
    </small>
  </div>
</div>

    <hr class="divider">

<div class="stat">
  <div class="val">
    <div class="barra-container">
      <div class="barra kind" style="width:${(qtdK / (qtdK + qtdF) * 100).toFixed(1)}%">
        ${qtdK} Kindle
      </div>
      <div class="barra fisico" style="width:${(qtdF / (qtdK + qtdF) * 100).toFixed(1)}%">
        ${qtdF} FÃ­sico
      </div>
    </div>
  </div>
</div>

<div class="stat">
  <div class="val">
    <div class="barra-container">
      <div class="barra pt" style="width:${(qtdPT / (qtdPT + qtdIN) * 100).toFixed(1)}%">
        ${qtdPT} PT
      </div>
      <div class="barra in" style="width:${(qtdIN / (qtdPT + qtdIN) * 100).toFixed(1)}%">
        ${qtdIN} EN
      </div>
    </div>
  </div>
</div>

    <hr class="divider">

    <div class="stat"><span>ğŸ“‘ MÃ©dia de pÃ¡ginas</span>
      <div class="val">ğŸ“± ${mediaK} &nbsp; | &nbsp; ğŸ“– ${mediaF}</div>
    </div>

<div class="stat"><span>â™¯ GÃªneros mais lidos</span>
  <div class="val">
    ${topGeneros.map(([g,c])=>`${g} (${c})`).join("<br>")}
  </div>
</div>
<div class="stat"><span>â˜¾â˜¼ Maior/Menor</span>
â–² ${maiorLivroObj ? maiorLivroObj.TITLE+" ("+maiorLivroObj.PAGES+" pÃ¡g)" : "-"}<br>
â–¼ ${menorLivroObj ? menorLivroObj.TITLE+" ("+menorLivroObj.PAGES+" pÃ¡g)" : "-"}
  
</div>

    <div class="stat"><span>ğŸ—“ï¸ PÃ¡ginas por dia</span>
      <div class="val">${(pages/365).toFixed(2)}</div>
    </div>

    <hr class="divider">
<div class="stat">
  <span> â¤ï¸ The Greatest âœ¦</span>
  <div class="val greatest-grid">
    ${greatest.map(b => `<div>â€¢ ${b.TITLE}</div>`).join("")}
  </div>
</div>

  </div>
`;


        container.appendChild(block);
      });
    }

    // FunÃ§Ã£o para aplicar tema
    function setTheme(themeClass) {
      document.body.className = themeClass;
      localStorage.setItem("selectedTheme", themeClass); // salva escolha
    }

    // Ao carregar a pÃ¡gina, aplica o tema salvo
    document.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("selectedTheme");
      if (savedTheme) {
        document.body.className = savedTheme;
      } else {
        document.body.className = "theme-dark"; // tema padrÃ£o
      }
    });

    // NavegaÃ§Ã£o dos botÃµes
    document.getElementById("charts")?.addEventListener("click", () => {
      location.href = "charts.html";
    });

    document.getElementById("tags")?.addEventListener("click", () => {
      location.href = "tags.html";
    });

    document.getElementById("flashback")?.addEventListener("click", () => {
      location.href = "flashback.html";
    });

    document.getElementById("back")?.addEventListener("click", () => {
      location.href = "index.html";
    });
    
        document.getElementById("2026")?.addEventListener("click", () => {
      location.href = "recomendaÃ§Ãµes2026.html";
    });
  </script>
</body>

</html>
